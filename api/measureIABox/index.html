<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Marloes van Heukelum" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>MeasureIABox - MeasureIA Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "MeasureIABox";
        var mkdocs_page_input_path = "api/measureIABox.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MeasureIA Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../installation/">Installation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../usage/">Usage</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../output_structure/">Output</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../roadmap/">Roadmap</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">API Reference</span></p>
              <ul class="current">
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">MeasureIABox</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#measureia.MeasureIABox">MeasureIABox</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#measureia.MeasureIABox.__init__">__init__</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#measureia.MeasureIABox.measure_xi_w">measure_xi_w</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#measureia.MeasureIABox.measure_xi_multipoles">measure_xi_multipoles</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../measureIALightcone/">MeasureIALightcone</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MeasureIABase/">MeasureIABase</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MeasureJackknife/">MeasureJackknife</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MeasureWBox/">MeasureWBox</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MeasureMBox/">MeasureMultipolesBox</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MeasureWBoxJackknife/">MeasureWBoxJackknife</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../MeasureMBoxJackknife/">MeasureMBoxJackknife</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../SimInfo/">SimInfo</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ReadData/">ReadData</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MeasureIA Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">API Reference</li>
      <li class="breadcrumb-item active">MeasureIABox</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="measureia">MeasureIA</h1>


<div class="doc doc-object doc-class">



<h2 id="measureia.MeasureIABox" class="doc doc-heading">
            <code>measureia.MeasureIABox</code>


</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="measureia.MeasureWBox (measureia.measure_w_box.MeasureWBox)" href="../MeasureWBox/#measureia.MeasureWBox">MeasureWBox</a></code>, <code><a class="autorefs autorefs-internal" title="measureia.MeasureMultipolesBox (measureia.measure_m_box.MeasureMultipolesBox)" href="../MeasureMBox/#measureia.MeasureMultipolesBox">MeasureMultipolesBox</a></code>, <code><a class="autorefs autorefs-internal" title="measureia.measure_w_box_jk.MeasureWBoxJackknife" href="../MeasureWBoxJackknife/#measureia.MeasureWBoxJackknife">MeasureWBoxJackknife</a></code>, <code><a class="autorefs autorefs-internal" title="measureia.measure_m_box_jk.MeasureMBoxJackknife" href="../MeasureMBoxJackknife/#measureia.MeasureMBoxJackknife">MeasureMBoxJackknife</a></code></p>


        <p>Manages the IA correlation function measurement methods used in the MeasureIA package based on speed and input.
This class is used to call the methods that measure <span class="arithmatex">\(w_{gg}\)</span>, <span class="arithmatex">\(w_{g+}\)</span> and multipoles for simulations in cartesian
coordinates. Depending on the input parameters, various correlations incl covariance estimates are measured for
given data.</p>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="measure_xi_w(dataset_name, corr_type, num_jk=0, temp_file_path=None, masks=None, ellipticity='distortion', chunk_size=1000) (measureia.MeasureIABox.measure_xi_w)" href="#measureia.MeasureIABox.measure_xi_w">measure_xi_w</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Compute projected correlations <span class="arithmatex">\(w_{gg}\)</span> and/or <span class="arithmatex">\(w_{g+}\)</span>.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="measure_xi_multipoles(dataset_name, corr_type, num_jk=0, temp_file_path=None, masks=None, rp_cut=None, ellipticity='distortion', chunk_size=1000) (measureia.MeasureIABox.measure_xi_multipoles)" href="#measureia.MeasureIABox.measure_xi_multipoles">measure_xi_multipoles</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Compute multipoles of the correlation functions, <span class="arithmatex">\(\tilde{\xi}_{gg,0}\)</span> and/or <span class="arithmatex">\(\tilde{\xi}_{g+,2}\)</span>.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>Inherits attributes from 'SimInfo', where 'boxsize', 'L_0p5' and 'snap_group' are used in this class.
Inherits attributes from 'MeasureIABase', where 'data', 'output_file_name', 'periodicity', 'Num_position',
'Num_shape', 'r_min', 'r_max', 'num_bins_r', 'num_bins_pi', 'r_bins', 'pi_bins', 'mu_r_bins' are used.</p>
</details>







              <details class="quote">
                <summary>Source code in <code>src/measureia/measure_IA.py</code></summary>
                <pre class="highlight"><code class="language-python">class MeasureIABox(MeasureWBox, MeasureMultipolesBox, MeasureWBoxJackknife, MeasureMBoxJackknife):
	r"""Manages the IA correlation function measurement methods used in the MeasureIA package based on speed and input.
	This class is used to call the methods that measure $w_{gg}$, $w_{g+}$ and multipoles for simulations in cartesian
	coordinates. Depending on the input parameters, various correlations incl covariance estimates are measured for
	given data.

	Methods
	-------
	measure_xi_w()
		Compute projected correlations $w_{gg}$ and/or $w_{g+}$.
	measure_xi_multipoles()
		Compute multipoles of the correlation functions, $\tilde{\xi}_{gg,0}$ and/or $\tilde{\xi}_{g+,2}$.

	Notes
	-----
	Inherits attributes from 'SimInfo', where 'boxsize', 'L_0p5' and 'snap_group' are used in this class.
	Inherits attributes from 'MeasureIABase', where 'data', 'output_file_name', 'periodicity', 'Num_position',
	'Num_shape', 'r_min', 'r_max', 'num_bins_r', 'num_bins_pi', 'r_bins', 'pi_bins', 'mu_r_bins' are used.

	"""

	def __init__(
			self,
			data,
			output_file_name,
			simulation=None,
			snapshot=None,
			separation_limits=[0.1, 20.0],
			num_bins_r=8,
			num_bins_pi=20,
			pi_max=None,
			boxsize=None,
			periodicity=True,
			num_nodes=1,
	):
		"""
		The __init__ method of the MeasureIABox class.

		Parameters
		----------
		num_nodes : int, optional
			Number of cores to be used in multiprocessing. Default is 1.

		Notes
		-----
		Constructor parameters 'data', 'output_file_name', 'simulation', 'snapshot', 'separation_limits', 'num_bins_r',
		'num_bins_pi', 'pi_max', 'boxsize' and 'periodicity' are passed to MeasureIABase.

		"""
		super().__init__(data, output_file_name, simulation, snapshot, separation_limits, num_bins_r, num_bins_pi,
						 pi_max, boxsize, periodicity)
		self.num_nodes = num_nodes
		self.randoms_data = None
		self.data_dir = None
		self.num_samples = None

		return

	def measure_xi_w(self, dataset_name, corr_type, num_jk=0, temp_file_path=None, masks=None,
					 ellipticity='distortion', chunk_size=1000):
		r"""Measures $\xi_{gg}$, $\xi_{g+}$ and $w_{gg}$, $w_{g+}$ including jackknife covariance if desired.
		Manages the various _measure_xi_rp_pi_box method options in MeasureWBox and MeasureWBoxJackknife.

		Parameters
		----------
		dataset_name : str
			Name of the dataset in the output file.
		corr_type : str
			Type of correlation to be measured. Choose from [g+, gg, both].
		num_jk : int, optional
			Number of jackknife regions (needs to be x^3, with x an int) for the covariance measurement.
			Default is 0 (no covariance).
		temp_file_path : str or NoneType, optional
			Path to where the data is temporarily stored [file name generated automatically].
		masks : dict or NoneType, optional
			Directory of mask information in the same form as the data dictionary, where the masks are placed over
			the data to apply selections. Default is None.
		chunk_size: int, optional
			Size of the chunks of data sent to each multiprocessing node. If larger, more RAM is needed per node.
			Default is 1000.
		ellipticity : str, optional
			Definition of ellipticity. Choose from 'distortion', defined as (1-q^2)/(1+q^2), or 'ellipticity', defined
			 as (1-q)/(1+q). Default is 'distortion'.

		"""
		if num_jk &gt; 0:
			try:
				assert sympy.integer_nthroot(num_jk, 3)[1]
				L = sympy.integer_nthroot(num_jk, 3)[0]
			except AssertionError:
				raise ValueError(
					f"Use x^3 as input for num_jk, with x as an int. {float(int(num_jk ** (1. / 3)))},{num_jk ** (1. / 3)}")

		if temp_file_path == False:
			temp_storage = False
			temp_file_path = None
		else:
			temp_storage = True
		if temp_storage and temp_file_path == None:
			raise ValueError(
				"Input temp_file_path for faster computation. Do not want to save data temporarily? Input file_path_tree=False.")

		# replace by better checks of input data
		try:
			RA = self.data["RA"]
			print("Given data is lightcone, use measure_xi_w_lightcone method instead.")
			exit()
		except:
			pass

		if num_jk &gt; 0:  # include covariance
			if self.num_nodes &gt; 1 and temp_storage:
				self._measure_xi_rp_pi_box_jk_multiprocessing(masks=masks, L_subboxes=L, dataset_name=dataset_name,
															  return_output=False,
															  num_nodes=self.num_nodes,
															  jk_group_name=f"{dataset_name}_jk{num_jk}",
															  chunk_size=chunk_size, ellipticity=ellipticity,
															  temp_file_path=temp_file_path)
			elif temp_storage:
				self._measure_xi_rp_pi_box_jk_tree(masks=masks, L_subboxes=L, dataset_name=dataset_name,
												   return_output=False, ellipticity=ellipticity,
												   jk_group_name=f"{dataset_name}_jk{num_jk}")
			else:
				self._measure_xi_rp_pi_box_jk_brute(masks=masks, L_subboxes=L, dataset_name=dataset_name,
													return_output=False, ellipticity=ellipticity,
													jk_group_name=f"{dataset_name}_jk{num_jk}")
			self._measure_w_g_i(corr_type=corr_type, dataset_name=dataset_name, return_output=False)
			for i in np.arange(num_jk):
				self._measure_w_g_i(corr_type=corr_type, dataset_name=f"{dataset_name}_{i}",
									jk_group_name=f"{dataset_name}_jk{num_jk}", return_output=False)
			if corr_type == "both":
				corr_group = ["w_g_plus", "w_gg"]
			elif corr_type == "g+":
				corr_group = ["w_g_plus"]
			elif corr_type == "gg":
				corr_group = ["w_gg"]
			else:
				raise KeyError("Unknown value for corr_type. Choose from [g+, gg, both]")
			self._combine_jackknife_information(dataset_name=dataset_name, jk_group_name=f"{dataset_name}_jk{num_jk}",
												corr_group=corr_group, num_box=num_jk)
		else:  # no covariance
			if self.num_nodes &gt; 1 and temp_storage:
				self._measure_xi_rp_pi_box_multiprocessing(dataset_name=dataset_name, temp_file_path=temp_file_path,
														   masks=masks, return_output=False, num_nodes=self.num_nodes,
														   chunk_size=chunk_size, ellipticity=ellipticity)
			elif temp_storage:
				self._measure_xi_rp_pi_box_tree(masks=masks, dataset_name=dataset_name,
												return_output=False, ellipticity=ellipticity)
			else:
				self._measure_xi_rp_pi_box_brute(masks=masks, dataset_name=dataset_name,
												 return_output=False, ellipticity=ellipticity)
			self._measure_w_g_i(corr_type=corr_type, dataset_name=dataset_name, return_output=False)

		return

	def measure_xi_multipoles(self, dataset_name, corr_type, num_jk=0, temp_file_path=None, masks=None, rp_cut=None,
							  ellipticity='distortion', chunk_size=1000):
		r"""Measures $\xi_{gg}$, $\xi_{g+}$ and $\tilde{\xi}_{gg,0}$, $\tilde{\xi}_{g+,2}$ including jackknife covariance
		if desired. Manages the various _measure_xi_r_mur_box method options in MeasureMultipolesBox and
		MeasureMultipolesBoxJackknife.

		Parameters
		----------
		dataset_name : str
			Name of the dataset in the output file.
		corr_type : str
			Type of correlation to be measured. Choose from [g+, gg, both].
		num_jk : int, optional
			Number of jackknife regions (needs to be x^3, with x an int) for the covariance measurement. Default is 0 (no covariance).
		temp_file_path : str or NoneType, optional
			Path to where the data is temporarily stored [file name generated automatically].
		masks : dict or NoneType, optional
			Directory of mask information in the same form as the data dictionary, where the masks are placed over
			the data to apply selections. Default is None.
		rp_cut : float or NoneType, optional
			Applies a minimum r_p value condition for pairs to be included. Default is None.
		chunck_size: int, optional
			Size of the chunks of data sent to each multiprocessing node. If larger, more RAM is needed per node.
		ellipticity : str, optional
			Definition of ellipticity. Choose from 'distortion', defined as (1-q^2)/(1+q^2), or 'ellipticity', defined
			 as (1-q)/(1+q). Default is 'distortion'.
		"""

		if num_jk &gt; 0:
			try:
				assert sympy.integer_nthroot(num_jk, 3)[1]
				L = sympy.integer_nthroot(num_jk, 3)[0]
			except AssertionError:
				raise ValueError(
					f"Use x^3 as input for num_jk, with x as an int. {float(int(num_jk ** (1. / 3)))},{num_jk ** (1. / 3)}")

		if temp_file_path == False:
			temp_storage = False
			temp_file_path = None
		else:
			temp_storage = True
		if temp_storage and temp_file_path == None:
			raise ValueError(
				"Input temp_file_path for faster computation. Do not want to save data temporarily? Input file_path_tree=False.")

		# replace by better checks of input data
		try:
			RA = self.data["RA"]
			print("Given data is lightcone, use measure_xi_w_lightcone method instead.")
			exit()
		except:
			pass

		if num_jk &gt; 0:  # include covariance
			if self.num_nodes &gt; 1 and temp_storage:
				self._measure_xi_r_mur_box_jk_multiprocessing(masks=masks, L_subboxes=L, dataset_name=dataset_name,
															  return_output=False,
															  num_nodes=self.num_nodes,
															  jk_group_name=f"{dataset_name}_jk{num_jk}",
															  chunk_size=chunk_size, ellipticity=ellipticity,
															  file_tree_path=temp_file_path)
			elif temp_storage:
				self._measure_xi_r_mur_box_jk_tree(masks=masks, L_subboxes=L, dataset_name=dataset_name,
												   return_output=False, ellipticity=ellipticity,
												   jk_group_name=f"{dataset_name}_jk{num_jk}")
			else:
				self._measure_xi_r_mur_box_jk_brute(masks=masks, L_subboxes=L, dataset_name=dataset_name,
													return_output=False, ellipticity=ellipticity,
													jk_group_name=f"{dataset_name}_jk{num_jk}")
			self._measure_multipoles(corr_type=corr_type, dataset_name=dataset_name, return_output=False)
			for i in np.arange(num_jk):
				self._measure_multipoles(corr_type=corr_type, dataset_name=f"{dataset_name}_{i}",
										 jk_group_name=f"{dataset_name}_jk{num_jk}", return_output=False)
			if corr_type == "both":
				corr_group = ["multipoles_g_plus", "multipoles_gg"]
			elif corr_type == "g+":
				corr_group = ["multipoles_g_plus"]
			elif corr_type == "gg":
				corr_group = ["multipoles_gg"]
			else:
				raise KeyError("Unknown value for corr_type. Choose from [g+, gg, both]")
			self._combine_jackknife_information(dataset_name=dataset_name, jk_group_name=f"{dataset_name}_jk{num_jk}",
												corr_group=corr_group, num_box=num_jk)
		else:  # no covariance
			if self.num_nodes &gt; 1 and temp_storage:
				self._measure_xi_r_mur_box_multiprocessing(dataset_name=dataset_name, temp_file_path=temp_file_path,
														   masks=masks, return_output=False, num_nodes=self.num_nodes,
														   chunk_size=chunk_size, ellipticity=ellipticity)
			elif temp_storage:
				self._measure_xi_r_mur_box_tree(masks=masks, dataset_name=dataset_name,
												return_output=False,
												ellipticity=ellipticity)
			else:
				self._measure_xi_r_mur_box_brute(masks=masks, dataset_name=dataset_name,
												 return_output=False, ellipticity=ellipticity)
			self._measure_multipoles(corr_type=corr_type, dataset_name=dataset_name, return_output=False)

		return</code></pre>
              </details>



  <div class="doc doc-children">










<div class="doc doc-object doc-function">


<h3 id="measureia.MeasureIABox.__init__" class="doc doc-heading">
            <code class="highlight language-python">__init__(data, output_file_name, simulation=None, snapshot=None, separation_limits=[0.1, 20.0], num_bins_r=8, num_bins_pi=20, pi_max=None, boxsize=None, periodicity=True, num_nodes=1)</code>

</h3>


    <div class="doc doc-contents ">

        <p>The <strong>init</strong> method of the MeasureIABox class.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>num_nodes</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>1</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Number of cores to be used in multiprocessing. Default is 1.
</code></pre>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<details class="note" open>
  <summary>Notes</summary>
  <p>Constructor parameters 'data', 'output_file_name', 'simulation', 'snapshot', 'separation_limits', 'num_bins_r',
'num_bins_pi', 'pi_max', 'boxsize' and 'periodicity' are passed to MeasureIABase.</p>
</details>

            <details class="quote">
              <summary>Source code in <code>src/measureia/measure_IA.py</code></summary>
              <pre class="highlight"><code class="language-python">def __init__(
		self,
		data,
		output_file_name,
		simulation=None,
		snapshot=None,
		separation_limits=[0.1, 20.0],
		num_bins_r=8,
		num_bins_pi=20,
		pi_max=None,
		boxsize=None,
		periodicity=True,
		num_nodes=1,
):
	"""
	The __init__ method of the MeasureIABox class.

	Parameters
	----------
	num_nodes : int, optional
		Number of cores to be used in multiprocessing. Default is 1.

	Notes
	-----
	Constructor parameters 'data', 'output_file_name', 'simulation', 'snapshot', 'separation_limits', 'num_bins_r',
	'num_bins_pi', 'pi_max', 'boxsize' and 'periodicity' are passed to MeasureIABase.

	"""
	super().__init__(data, output_file_name, simulation, snapshot, separation_limits, num_bins_r, num_bins_pi,
					 pi_max, boxsize, periodicity)
	self.num_nodes = num_nodes
	self.randoms_data = None
	self.data_dir = None
	self.num_samples = None

	return</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="measureia.MeasureIABox.measure_xi_w" class="doc doc-heading">
            <code class="highlight language-python">measure_xi_w(dataset_name, corr_type, num_jk=0, temp_file_path=None, masks=None, ellipticity='distortion', chunk_size=1000)</code>

</h3>


    <div class="doc doc-contents ">

        <p>Measures <span class="arithmatex">\(\xi_{gg}\)</span>, <span class="arithmatex">\(\xi_{g+}\)</span> and <span class="arithmatex">\(w_{gg}\)</span>, <span class="arithmatex">\(w_{g+}\)</span> including jackknife covariance if desired.
Manages the various _measure_xi_rp_pi_box method options in MeasureWBox and MeasureWBoxJackknife.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>dataset_name</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <pre><code>Name of the dataset in the output file.
</code></pre>
              </div>
            </li>
            <li>
              <b><code>corr_type</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <pre><code>Type of correlation to be measured. Choose from [g+, gg, both].
</code></pre>
              </div>
            </li>
            <li>
              <b><code>num_jk</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>0</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Number of jackknife regions (needs to be x^3, with x an int) for the covariance measurement.
Default is 0 (no covariance).
</code></pre>
              </div>
            </li>
            <li>
              <b><code>temp_file_path</code></b>
                  (<code><span title="str">str</span> or <span title="NoneType">NoneType</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Path to where the data is temporarily stored [file name generated automatically].
</code></pre>
              </div>
            </li>
            <li>
              <b><code>masks</code></b>
                  (<code><span title="dict">dict</span> or <span title="NoneType">NoneType</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Directory of mask information in the same form as the data dictionary, where the masks are placed over
the data to apply selections. Default is None.
</code></pre>
              </div>
            </li>
            <li>
              <b><code>chunk_size</code></b>
              –
              <div class="doc-md-description">
                <pre><code>Size of the chunks of data sent to each multiprocessing node. If larger, more RAM is needed per node.
Default is 1000.
</code></pre>
              </div>
            </li>
            <li>
              <b><code>ellipticity</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;distortion&#39;</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Definition of ellipticity. Choose from 'distortion', defined as (1-q^2)/(1+q^2), or 'ellipticity', defined
 as (1-q)/(1+q). Default is 'distortion'.
</code></pre>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>src/measureia/measure_IA.py</code></summary>
              <pre class="highlight"><code class="language-python">def measure_xi_w(self, dataset_name, corr_type, num_jk=0, temp_file_path=None, masks=None,
				 ellipticity='distortion', chunk_size=1000):
	r"""Measures $\xi_{gg}$, $\xi_{g+}$ and $w_{gg}$, $w_{g+}$ including jackknife covariance if desired.
	Manages the various _measure_xi_rp_pi_box method options in MeasureWBox and MeasureWBoxJackknife.

	Parameters
	----------
	dataset_name : str
		Name of the dataset in the output file.
	corr_type : str
		Type of correlation to be measured. Choose from [g+, gg, both].
	num_jk : int, optional
		Number of jackknife regions (needs to be x^3, with x an int) for the covariance measurement.
		Default is 0 (no covariance).
	temp_file_path : str or NoneType, optional
		Path to where the data is temporarily stored [file name generated automatically].
	masks : dict or NoneType, optional
		Directory of mask information in the same form as the data dictionary, where the masks are placed over
		the data to apply selections. Default is None.
	chunk_size: int, optional
		Size of the chunks of data sent to each multiprocessing node. If larger, more RAM is needed per node.
		Default is 1000.
	ellipticity : str, optional
		Definition of ellipticity. Choose from 'distortion', defined as (1-q^2)/(1+q^2), or 'ellipticity', defined
		 as (1-q)/(1+q). Default is 'distortion'.

	"""
	if num_jk &gt; 0:
		try:
			assert sympy.integer_nthroot(num_jk, 3)[1]
			L = sympy.integer_nthroot(num_jk, 3)[0]
		except AssertionError:
			raise ValueError(
				f"Use x^3 as input for num_jk, with x as an int. {float(int(num_jk ** (1. / 3)))},{num_jk ** (1. / 3)}")

	if temp_file_path == False:
		temp_storage = False
		temp_file_path = None
	else:
		temp_storage = True
	if temp_storage and temp_file_path == None:
		raise ValueError(
			"Input temp_file_path for faster computation. Do not want to save data temporarily? Input file_path_tree=False.")

	# replace by better checks of input data
	try:
		RA = self.data["RA"]
		print("Given data is lightcone, use measure_xi_w_lightcone method instead.")
		exit()
	except:
		pass

	if num_jk &gt; 0:  # include covariance
		if self.num_nodes &gt; 1 and temp_storage:
			self._measure_xi_rp_pi_box_jk_multiprocessing(masks=masks, L_subboxes=L, dataset_name=dataset_name,
														  return_output=False,
														  num_nodes=self.num_nodes,
														  jk_group_name=f"{dataset_name}_jk{num_jk}",
														  chunk_size=chunk_size, ellipticity=ellipticity,
														  temp_file_path=temp_file_path)
		elif temp_storage:
			self._measure_xi_rp_pi_box_jk_tree(masks=masks, L_subboxes=L, dataset_name=dataset_name,
											   return_output=False, ellipticity=ellipticity,
											   jk_group_name=f"{dataset_name}_jk{num_jk}")
		else:
			self._measure_xi_rp_pi_box_jk_brute(masks=masks, L_subboxes=L, dataset_name=dataset_name,
												return_output=False, ellipticity=ellipticity,
												jk_group_name=f"{dataset_name}_jk{num_jk}")
		self._measure_w_g_i(corr_type=corr_type, dataset_name=dataset_name, return_output=False)
		for i in np.arange(num_jk):
			self._measure_w_g_i(corr_type=corr_type, dataset_name=f"{dataset_name}_{i}",
								jk_group_name=f"{dataset_name}_jk{num_jk}", return_output=False)
		if corr_type == "both":
			corr_group = ["w_g_plus", "w_gg"]
		elif corr_type == "g+":
			corr_group = ["w_g_plus"]
		elif corr_type == "gg":
			corr_group = ["w_gg"]
		else:
			raise KeyError("Unknown value for corr_type. Choose from [g+, gg, both]")
		self._combine_jackknife_information(dataset_name=dataset_name, jk_group_name=f"{dataset_name}_jk{num_jk}",
											corr_group=corr_group, num_box=num_jk)
	else:  # no covariance
		if self.num_nodes &gt; 1 and temp_storage:
			self._measure_xi_rp_pi_box_multiprocessing(dataset_name=dataset_name, temp_file_path=temp_file_path,
													   masks=masks, return_output=False, num_nodes=self.num_nodes,
													   chunk_size=chunk_size, ellipticity=ellipticity)
		elif temp_storage:
			self._measure_xi_rp_pi_box_tree(masks=masks, dataset_name=dataset_name,
											return_output=False, ellipticity=ellipticity)
		else:
			self._measure_xi_rp_pi_box_brute(masks=masks, dataset_name=dataset_name,
											 return_output=False, ellipticity=ellipticity)
		self._measure_w_g_i(corr_type=corr_type, dataset_name=dataset_name, return_output=False)

	return</code></pre>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="measureia.MeasureIABox.measure_xi_multipoles" class="doc doc-heading">
            <code class="highlight language-python">measure_xi_multipoles(dataset_name, corr_type, num_jk=0, temp_file_path=None, masks=None, rp_cut=None, ellipticity='distortion', chunk_size=1000)</code>

</h3>


    <div class="doc doc-contents ">

        <p>Measures <span class="arithmatex">\(\xi_{gg}\)</span>, <span class="arithmatex">\(\xi_{g+}\)</span> and <span class="arithmatex">\(\tilde{\xi}_{gg,0}\)</span>, <span class="arithmatex">\(\tilde{\xi}_{g+,2}\)</span> including jackknife covariance
if desired. Manages the various _measure_xi_r_mur_box method options in MeasureMultipolesBox and
MeasureMultipolesBoxJackknife.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>dataset_name</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <pre><code>Name of the dataset in the output file.
</code></pre>
              </div>
            </li>
            <li>
              <b><code>corr_type</code></b>
                  (<code><span title="str">str</span></code>)
              –
              <div class="doc-md-description">
                <pre><code>Type of correlation to be measured. Choose from [g+, gg, both].
</code></pre>
              </div>
            </li>
            <li>
              <b><code>num_jk</code></b>
                  (<code><span title="int">int</span></code>, default:
                      <code>0</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Number of jackknife regions (needs to be x^3, with x an int) for the covariance measurement. Default is 0 (no covariance).
</code></pre>
              </div>
            </li>
            <li>
              <b><code>temp_file_path</code></b>
                  (<code><span title="str">str</span> or <span title="NoneType">NoneType</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Path to where the data is temporarily stored [file name generated automatically].
</code></pre>
              </div>
            </li>
            <li>
              <b><code>masks</code></b>
                  (<code><span title="dict">dict</span> or <span title="NoneType">NoneType</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Directory of mask information in the same form as the data dictionary, where the masks are placed over
the data to apply selections. Default is None.
</code></pre>
              </div>
            </li>
            <li>
              <b><code>rp_cut</code></b>
                  (<code><span title="float">float</span> or <span title="NoneType">NoneType</span></code>, default:
                      <code>None</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Applies a minimum r_p value condition for pairs to be included. Default is None.
</code></pre>
              </div>
            </li>
            <li>
              <b><code>chunck_size</code></b>
              –
              <div class="doc-md-description">
                <pre><code>Size of the chunks of data sent to each multiprocessing node. If larger, more RAM is needed per node.
</code></pre>
              </div>
            </li>
            <li>
              <b><code>ellipticity</code></b>
                  (<code><span title="str">str</span></code>, default:
                      <code>&#39;distortion&#39;</code>
)
              –
              <div class="doc-md-description">
                <pre><code>Definition of ellipticity. Choose from 'distortion', defined as (1-q^2)/(1+q^2), or 'ellipticity', defined
 as (1-q)/(1+q). Default is 'distortion'.
</code></pre>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

            <details class="quote">
              <summary>Source code in <code>src/measureia/measure_IA.py</code></summary>
              <pre class="highlight"><code class="language-python">def measure_xi_multipoles(self, dataset_name, corr_type, num_jk=0, temp_file_path=None, masks=None, rp_cut=None,
						  ellipticity='distortion', chunk_size=1000):
	r"""Measures $\xi_{gg}$, $\xi_{g+}$ and $\tilde{\xi}_{gg,0}$, $\tilde{\xi}_{g+,2}$ including jackknife covariance
	if desired. Manages the various _measure_xi_r_mur_box method options in MeasureMultipolesBox and
	MeasureMultipolesBoxJackknife.

	Parameters
	----------
	dataset_name : str
		Name of the dataset in the output file.
	corr_type : str
		Type of correlation to be measured. Choose from [g+, gg, both].
	num_jk : int, optional
		Number of jackknife regions (needs to be x^3, with x an int) for the covariance measurement. Default is 0 (no covariance).
	temp_file_path : str or NoneType, optional
		Path to where the data is temporarily stored [file name generated automatically].
	masks : dict or NoneType, optional
		Directory of mask information in the same form as the data dictionary, where the masks are placed over
		the data to apply selections. Default is None.
	rp_cut : float or NoneType, optional
		Applies a minimum r_p value condition for pairs to be included. Default is None.
	chunck_size: int, optional
		Size of the chunks of data sent to each multiprocessing node. If larger, more RAM is needed per node.
	ellipticity : str, optional
		Definition of ellipticity. Choose from 'distortion', defined as (1-q^2)/(1+q^2), or 'ellipticity', defined
		 as (1-q)/(1+q). Default is 'distortion'.
	"""

	if num_jk &gt; 0:
		try:
			assert sympy.integer_nthroot(num_jk, 3)[1]
			L = sympy.integer_nthroot(num_jk, 3)[0]
		except AssertionError:
			raise ValueError(
				f"Use x^3 as input for num_jk, with x as an int. {float(int(num_jk ** (1. / 3)))},{num_jk ** (1. / 3)}")

	if temp_file_path == False:
		temp_storage = False
		temp_file_path = None
	else:
		temp_storage = True
	if temp_storage and temp_file_path == None:
		raise ValueError(
			"Input temp_file_path for faster computation. Do not want to save data temporarily? Input file_path_tree=False.")

	# replace by better checks of input data
	try:
		RA = self.data["RA"]
		print("Given data is lightcone, use measure_xi_w_lightcone method instead.")
		exit()
	except:
		pass

	if num_jk &gt; 0:  # include covariance
		if self.num_nodes &gt; 1 and temp_storage:
			self._measure_xi_r_mur_box_jk_multiprocessing(masks=masks, L_subboxes=L, dataset_name=dataset_name,
														  return_output=False,
														  num_nodes=self.num_nodes,
														  jk_group_name=f"{dataset_name}_jk{num_jk}",
														  chunk_size=chunk_size, ellipticity=ellipticity,
														  file_tree_path=temp_file_path)
		elif temp_storage:
			self._measure_xi_r_mur_box_jk_tree(masks=masks, L_subboxes=L, dataset_name=dataset_name,
											   return_output=False, ellipticity=ellipticity,
											   jk_group_name=f"{dataset_name}_jk{num_jk}")
		else:
			self._measure_xi_r_mur_box_jk_brute(masks=masks, L_subboxes=L, dataset_name=dataset_name,
												return_output=False, ellipticity=ellipticity,
												jk_group_name=f"{dataset_name}_jk{num_jk}")
		self._measure_multipoles(corr_type=corr_type, dataset_name=dataset_name, return_output=False)
		for i in np.arange(num_jk):
			self._measure_multipoles(corr_type=corr_type, dataset_name=f"{dataset_name}_{i}",
									 jk_group_name=f"{dataset_name}_jk{num_jk}", return_output=False)
		if corr_type == "both":
			corr_group = ["multipoles_g_plus", "multipoles_gg"]
		elif corr_type == "g+":
			corr_group = ["multipoles_g_plus"]
		elif corr_type == "gg":
			corr_group = ["multipoles_gg"]
		else:
			raise KeyError("Unknown value for corr_type. Choose from [g+, gg, both]")
		self._combine_jackknife_information(dataset_name=dataset_name, jk_group_name=f"{dataset_name}_jk{num_jk}",
											corr_group=corr_group, num_box=num_jk)
	else:  # no covariance
		if self.num_nodes &gt; 1 and temp_storage:
			self._measure_xi_r_mur_box_multiprocessing(dataset_name=dataset_name, temp_file_path=temp_file_path,
													   masks=masks, return_output=False, num_nodes=self.num_nodes,
													   chunk_size=chunk_size, ellipticity=ellipticity)
		elif temp_storage:
			self._measure_xi_r_mur_box_tree(masks=masks, dataset_name=dataset_name,
											return_output=False,
											ellipticity=ellipticity)
		else:
			self._measure_xi_r_mur_box_brute(masks=masks, dataset_name=dataset_name,
											 return_output=False, ellipticity=ellipticity)
		self._measure_multipoles(corr_type=corr_type, dataset_name=dataset_name, return_output=False)

	return</code></pre>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../../roadmap/" class="btn btn-neutral float-left" title="Roadmap"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../measureIALightcone/" class="btn btn-neutral float-right" title="MeasureIALightcone">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../../roadmap/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../measureIALightcone/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
